     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_init_gdtidt
     7 00000000                                 	EXTERN	_init_pic
     8 00000000                                 	EXTERN	_io_sti
     9 00000000                                 	EXTERN	_keyfifo
    10 00000000                                 	EXTERN	_fifo8_init
    11 00000000                                 	EXTERN	_mousefifo
    12 00000000                                 	EXTERN	_io_out8
    13 00000000                                 	EXTERN	_init_keyboard
    14 00000000                                 	EXTERN	_enable_mouse
    15 00000000                                 	EXTERN	_init_palette
    16 00000000                                 	EXTERN	_init_screen
    17 00000000                                 	EXTERN	_init_mouse_cursor8
    18 00000000                                 	EXTERN	_putblock8_8
    19 00000000                                 	EXTERN	_sprintf
    20 00000000                                 	EXTERN	_putfonts8_asc
    21 00000000                                 	EXTERN	_io_cli
    22 00000000                                 	EXTERN	_fifo8_status
    23 00000000                                 	EXTERN	_fifo8_get
    24 00000000                                 	EXTERN	_mouse_decode
    25 00000000                                 	EXTERN	_boxfill8
    26 00000000                                 	EXTERN	_io_stihlt
    27 00000000                                 	EXTERN	_io_load_eflags
    28 00000000                                 	EXTERN	_io_store_eflags
    29 00000000                                 	EXTERN	_memtest_sub
    30 00000000                                 	EXTERN	_load_cr0
    31 00000000                                 	EXTERN	_store_cr0
    32 00000000                                 [FILE "bootpack.c"]
    33                                          [SECTION .data]
    34 00000000                                 LC0:
    35 00000000 28 25 33 64 2C 20 25 33 64 29   	DB	"(%3d, %3d)",0x00
       0000000A 00 
    36 0000000B                                 LC1:
    37 0000000B 6D 65 6D 6F 72 79 20 25 64 4D   	DB	"memory %dMB   free : %dKB",0x00
       00000015 42 20 20 20 66 72 65 65 20 3A 
       0000001F 20 25 64 4B 42 00 
    38 00000025                                 LC3:
    39 00000025 5B 6C 63 72 20 25 34 64 20 25   	DB	"[lcr %4d %4d]",0x00
       0000002F 34 64 5D 00 
    40 00000033                                 LC2:
    41 00000033 25 30 32 58 00                  	DB	"%02X",0x00
    42                                          [SECTION .text]
    43 00000000                                 	GLOBAL	_HariMain
    44 00000000                                 _HariMain:
    45 00000000 55                              	PUSH	EBP
    46 00000001 89 E5                           	MOV	EBP,ESP
    47 00000003 57                              	PUSH	EDI
    48 00000004 56                              	PUSH	ESI
    49 00000005 53                              	PUSH	EBX
    50 00000006 BB 00000002                     	MOV	EBX,2
    51 0000000B 81 EC 000001BC                  	SUB	ESP,444
    52 00000011 E8 [00000000]                   	CALL	_init_gdtidt
    53 00000016 E8 [00000000]                   	CALL	_init_pic
    54 0000001B E8 [00000000]                   	CALL	_io_sti
    55 00000020 8D 85 FFFFFED4                  	LEA	EAX,DWORD [-300+EBP]
    56 00000026 50                              	PUSH	EAX
    57 00000027 6A 20                           	PUSH	32
    58 00000029 68 [00000000]                   	PUSH	_keyfifo
    59 0000002E E8 [00000000]                   	CALL	_fifo8_init
    60 00000033 8D 85 FFFFFE54                  	LEA	EAX,DWORD [-428+EBP]
    61 00000039 50                              	PUSH	EAX
    62 0000003A 68 00000080                     	PUSH	128
    63 0000003F 68 [00000000]                   	PUSH	_mousefifo
    64 00000044 E8 [00000000]                   	CALL	_fifo8_init
    65 00000049 68 000000F9                     	PUSH	249
    66 0000004E 6A 21                           	PUSH	33
    67 00000050 E8 [00000000]                   	CALL	_io_out8
    68 00000055 83 C4 20                        	ADD	ESP,32
    69 00000058 68 000000EF                     	PUSH	239
    70 0000005D 68 000000A1                     	PUSH	161
    71 00000062 E8 [00000000]                   	CALL	_io_out8
    72 00000067 E8 [00000000]                   	CALL	_init_keyboard
    73 0000006C 8D 85 FFFFFE44                  	LEA	EAX,DWORD [-444+EBP]
    74 00000072 50                              	PUSH	EAX
    75 00000073 E8 [00000000]                   	CALL	_enable_mouse
    76 00000078 68 BFFFFFFF                     	PUSH	-1073741825
    77 0000007D 68 00400000                     	PUSH	4194304
    78 00000082 E8 000003CB                     	CALL	_memtest
    79 00000087 68 003C0000                     	PUSH	3932160
    80 0000008C 89 C6                           	MOV	ESI,EAX
    81 0000008E E8 0000043E                     	CALL	_memman_init
    82 00000093 68 0009E000                     	PUSH	647168
    83 00000098 68 00001000                     	PUSH	4096
    84 0000009D 68 003C0000                     	PUSH	3932160
    85 000000A2 E8 000004CD                     	CALL	_memman_free
    86 000000A7 8D 86 FFC00000                  	LEA	EAX,DWORD [-4194304+ESI]
    87 000000AD C1 EE 14                        	SHR	ESI,20
    88 000000B0 83 C4 24                        	ADD	ESP,36
    89 000000B3 50                              	PUSH	EAX
    90 000000B4 68 00400000                     	PUSH	4194304
    91 000000B9 68 003C0000                     	PUSH	3932160
    92 000000BE E8 000004B1                     	CALL	_memman_free
    93 000000C3 E8 [00000000]                   	CALL	_init_palette
    94 000000C8 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
    95 000000CF 50                              	PUSH	EAX
    96 000000D0 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    97 000000D7 50                              	PUSH	EAX
    98 000000D8 FF 35 00000FF8                  	PUSH	DWORD [4088]
    99 000000DE E8 [00000000]                   	CALL	_init_screen
   100 000000E3 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   101 000000EA 8D 48 F0                        	LEA	ECX,DWORD [-16+EAX]
   102 000000ED 89 C8                           	MOV	EAX,ECX
   103 000000EF 99                              	CDQ
   104 000000F0 F7 FB                           	IDIV	EBX
   105 000000F2 89 85 FFFFFE3C                  	MOV	DWORD [-452+EBP],EAX
   106 000000F8 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   107 000000FF 6A 0E                           	PUSH	14
   108 00000101 8D 48 D4                        	LEA	ECX,DWORD [-44+EAX]
   109 00000104 89 C8                           	MOV	EAX,ECX
   110 00000106 99                              	CDQ
   111 00000107 F7 FB                           	IDIV	EBX
   112 00000109 8D 9D FFFFFEF4                  	LEA	EBX,DWORD [-268+EBP]
   113 0000010F 89 C7                           	MOV	EDI,EAX
   114 00000111 53                              	PUSH	EBX
   115 00000112 E8 [00000000]                   	CALL	_init_mouse_cursor8
   116 00000117 83 C4 20                        	ADD	ESP,32
   117 0000011A 6A 10                           	PUSH	16
   118 0000011C 53                              	PUSH	EBX
   119 0000011D 57                              	PUSH	EDI
   120 0000011E FF B5 FFFFFE3C                  	PUSH	DWORD [-452+EBP]
   121 00000124 6A 10                           	PUSH	16
   122 00000126 6A 10                           	PUSH	16
   123 00000128 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   124 0000012F 50                              	PUSH	EAX
   125 00000130 FF 35 00000FF8                  	PUSH	DWORD [4088]
   126 00000136 E8 [00000000]                   	CALL	_putblock8_8
   127 0000013B 83 C4 20                        	ADD	ESP,32
   128 0000013E 57                              	PUSH	EDI
   129 0000013F FF B5 FFFFFE3C                  	PUSH	DWORD [-452+EBP]
   130 00000145 68 [00000000]                   	PUSH	LC0
   131 0000014A FF B5 FFFFFE40                  	PUSH	DWORD [-448+EBP]
   132 00000150 E8 [00000000]                   	CALL	_sprintf
   133 00000155 FF B5 FFFFFE40                  	PUSH	DWORD [-448+EBP]
   134 0000015B 6A 09                           	PUSH	9
   135 0000015D 6A 00                           	PUSH	0
   136 0000015F 6A 00                           	PUSH	0
   137 00000161 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   138 00000168 50                              	PUSH	EAX
   139 00000169 FF 35 00000FF8                  	PUSH	DWORD [4088]
   140 0000016F E8 [00000000]                   	CALL	_putfonts8_asc
   141 00000174 83 C4 28                        	ADD	ESP,40
   142 00000177 68 003C0000                     	PUSH	3932160
   143 0000017C E8 00000373                     	CALL	_memman_total
   144 00000181 C1 E8 0A                        	SHR	EAX,10
   145 00000184 89 04 24                        	MOV	DWORD [ESP],EAX
   146 00000187 56                              	PUSH	ESI
   147 00000188 68 [0000000B]                   	PUSH	LC1
   148 0000018D FF B5 FFFFFE40                  	PUSH	DWORD [-448+EBP]
   149 00000193 E8 [00000000]                   	CALL	_sprintf
   150 00000198 FF B5 FFFFFE40                  	PUSH	DWORD [-448+EBP]
   151 0000019E 6A 07                           	PUSH	7
   152 000001A0 6A 20                           	PUSH	32
   153 000001A2 6A 00                           	PUSH	0
   154 000001A4 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   155 000001AB 50                              	PUSH	EAX
   156 000001AC FF 35 00000FF8                  	PUSH	DWORD [4088]
   157 000001B2 E8 [00000000]                   	CALL	_putfonts8_asc
   158 000001B7 83 C4 28                        	ADD	ESP,40
   159 000001BA                                 L18:
   160 000001BA E8 [00000000]                   	CALL	_io_cli
   161 000001BF 68 [00000000]                   	PUSH	_keyfifo
   162 000001C4 E8 [00000000]                   	CALL	_fifo8_status
   163 000001C9 68 [00000000]                   	PUSH	_mousefifo
   164 000001CE 89 C3                           	MOV	EBX,EAX
   165 000001D0 E8 [00000000]                   	CALL	_fifo8_status
   166 000001D5 8D 04 18                        	LEA	EAX,DWORD [EAX+EBX*1]
   167 000001D8 5B                              	POP	EBX
   168 000001D9 5E                              	POP	ESI
   169 000001DA 85 C0                           	TEST	EAX,EAX
   170 000001DC 0F 84 00000266                  	JE	L19
   171 000001E2 68 [00000000]                   	PUSH	_keyfifo
   172 000001E7 E8 [00000000]                   	CALL	_fifo8_status
   173 000001EC 59                              	POP	ECX
   174 000001ED 85 C0                           	TEST	EAX,EAX
   175 000001EF 0F 85 000001EA                  	JNE	L20
   176 000001F5 68 [00000000]                   	PUSH	_mousefifo
   177 000001FA E8 [00000000]                   	CALL	_fifo8_status
   178 000001FF 5A                              	POP	EDX
   179 00000200 85 C0                           	TEST	EAX,EAX
   180 00000202 74 B6                           	JE	L18
   181 00000204 68 [00000000]                   	PUSH	_mousefifo
   182 00000209 E8 [00000000]                   	CALL	_fifo8_get
   183 0000020E 89 C3                           	MOV	EBX,EAX
   184 00000210 E8 [00000000]                   	CALL	_io_sti
   185 00000215 0F B6 C3                        	MOVZX	EAX,BL
   186 00000218 50                              	PUSH	EAX
   187 00000219 8D 85 FFFFFE44                  	LEA	EAX,DWORD [-444+EBP]
   188 0000021F 50                              	PUSH	EAX
   189 00000220 E8 [00000000]                   	CALL	_mouse_decode
   190 00000225 83 C4 0C                        	ADD	ESP,12
   191 00000228 85 C0                           	TEST	EAX,EAX
   192 0000022A 74 8E                           	JE	L18
   193 0000022C FF B5 FFFFFE4C                  	PUSH	DWORD [-436+EBP]
   194 00000232 FF B5 FFFFFE48                  	PUSH	DWORD [-440+EBP]
   195 00000238 68 [00000025]                   	PUSH	LC3
   196 0000023D FF B5 FFFFFE40                  	PUSH	DWORD [-448+EBP]
   197 00000243 E8 [00000000]                   	CALL	_sprintf
   198 00000248 83 C4 10                        	ADD	ESP,16
   199 0000024B F7 85 FFFFFE50 00000001         	TEST	DWORD [-432+EBP],1
   200 00000255 74 0A                           	JE	L11
   201 00000257 8B 9D FFFFFE40                  	MOV	EBX,DWORD [-448+EBP]
   202 0000025D C6 43 01 4C                     	MOV	BYTE [1+EBX],76
   203 00000261                                 L11:
   204 00000261 F7 85 FFFFFE50 00000002         	TEST	DWORD [-432+EBP],2
   205 0000026B 74 0A                           	JE	L12
   206 0000026D 8B 85 FFFFFE40                  	MOV	EAX,DWORD [-448+EBP]
   207 00000273 C6 40 03 52                     	MOV	BYTE [3+EAX],82
   208 00000277                                 L12:
   209 00000277 F7 85 FFFFFE50 00000004         	TEST	DWORD [-432+EBP],4
   210 00000281 74 0A                           	JE	L13
   211 00000283 8B 95 FFFFFE40                  	MOV	EDX,DWORD [-448+EBP]
   212 00000289 C6 42 02 43                     	MOV	BYTE [2+EDX],67
   213 0000028D                                 L13:
   214 0000028D 6A 1F                           	PUSH	31
   215 0000028F 68 00000097                     	PUSH	151
   216 00000294 6A 10                           	PUSH	16
   217 00000296 6A 20                           	PUSH	32
   218 00000298 6A 0E                           	PUSH	14
   219 0000029A 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   220 000002A1 50                              	PUSH	EAX
   221 000002A2 FF 35 00000FF8                  	PUSH	DWORD [4088]
   222 000002A8 E8 [00000000]                   	CALL	_boxfill8
   223 000002AD FF B5 FFFFFE40                  	PUSH	DWORD [-448+EBP]
   224 000002B3 6A 07                           	PUSH	7
   225 000002B5 6A 10                           	PUSH	16
   226 000002B7 6A 20                           	PUSH	32
   227 000002B9 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   228 000002C0 50                              	PUSH	EAX
   229 000002C1 FF 35 00000FF8                  	PUSH	DWORD [4088]
   230 000002C7 E8 [00000000]                   	CALL	_putfonts8_asc
   231 000002CC 8D 47 0F                        	LEA	EAX,DWORD [15+EDI]
   232 000002CF 83 C4 34                        	ADD	ESP,52
   233 000002D2 50                              	PUSH	EAX
   234 000002D3 8B 85 FFFFFE3C                  	MOV	EAX,DWORD [-452+EBP]
   235 000002D9 83 C0 0F                        	ADD	EAX,15
   236 000002DC 50                              	PUSH	EAX
   237 000002DD 57                              	PUSH	EDI
   238 000002DE FF B5 FFFFFE3C                  	PUSH	DWORD [-452+EBP]
   239 000002E4 6A 0E                           	PUSH	14
   240 000002E6 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   241 000002ED 50                              	PUSH	EAX
   242 000002EE FF 35 00000FF8                  	PUSH	DWORD [4088]
   243 000002F4 E8 [00000000]                   	CALL	_boxfill8
   244 000002F9 8B 9D FFFFFE48                  	MOV	EBX,DWORD [-440+EBP]
   245 000002FF 03 BD FFFFFE4C                  	ADD	EDI,DWORD [-436+EBP]
   246 00000305 83 C4 1C                        	ADD	ESP,28
   247 00000308 01 9D FFFFFE3C                  	ADD	DWORD [-452+EBP],EBX
   248 0000030E 0F 88 000000BC                  	JS	L21
   249 00000314                                 L14:
   250 00000314 85 FF                           	TEST	EDI,EDI
   251 00000316 0F 88 000000AD                  	JS	L22
   252 0000031C                                 L15:
   253 0000031C 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   254 00000323 83 E8 10                        	SUB	EAX,16
   255 00000326 39 85 FFFFFE3C                  	CMP	DWORD [-452+EBP],EAX
   256 0000032C 7E 06                           	JLE	L16
   257 0000032E 89 85 FFFFFE3C                  	MOV	DWORD [-452+EBP],EAX
   258 00000334                                 L16:
   259 00000334 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
   260 0000033B 83 E8 10                        	SUB	EAX,16
   261 0000033E 39 C7                           	CMP	EDI,EAX
   262 00000340 7E 02                           	JLE	L17
   263 00000342 89 C7                           	MOV	EDI,EAX
   264 00000344                                 L17:
   265 00000344 57                              	PUSH	EDI
   266 00000345 FF B5 FFFFFE3C                  	PUSH	DWORD [-452+EBP]
   267 0000034B 68 [00000000]                   	PUSH	LC0
   268 00000350 FF B5 FFFFFE40                  	PUSH	DWORD [-448+EBP]
   269 00000356 E8 [00000000]                   	CALL	_sprintf
   270 0000035B 6A 0F                           	PUSH	15
   271 0000035D 6A 4F                           	PUSH	79
   272 0000035F 6A 00                           	PUSH	0
   273 00000361 6A 00                           	PUSH	0
   274 00000363 6A 0E                           	PUSH	14
   275 00000365 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   276 0000036C 50                              	PUSH	EAX
   277 0000036D FF 35 00000FF8                  	PUSH	DWORD [4088]
   278 00000373 E8 [00000000]                   	CALL	_boxfill8
   279 00000378 83 C4 2C                        	ADD	ESP,44
   280 0000037B FF B5 FFFFFE40                  	PUSH	DWORD [-448+EBP]
   281 00000381 6A 07                           	PUSH	7
   282 00000383 6A 00                           	PUSH	0
   283 00000385 6A 00                           	PUSH	0
   284 00000387 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   285 0000038E 50                              	PUSH	EAX
   286 0000038F FF 35 00000FF8                  	PUSH	DWORD [4088]
   287 00000395 E8 [00000000]                   	CALL	_putfonts8_asc
   288 0000039A 8D 85 FFFFFEF4                  	LEA	EAX,DWORD [-268+EBP]
   289 000003A0 6A 10                           	PUSH	16
   290 000003A2 50                              	PUSH	EAX
   291 000003A3 57                              	PUSH	EDI
   292 000003A4 FF B5 FFFFFE3C                  	PUSH	DWORD [-452+EBP]
   293 000003AA 6A 10                           	PUSH	16
   294 000003AC 6A 10                           	PUSH	16
   295 000003AE 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   296 000003B5 50                              	PUSH	EAX
   297 000003B6 FF 35 00000FF8                  	PUSH	DWORD [4088]
   298 000003BC E8 [00000000]                   	CALL	_putblock8_8
   299 000003C1 83 C4 38                        	ADD	ESP,56
   300 000003C4 E9 FFFFFDF1                     	JMP	L18
   301 000003C9                                 L22:
   302 000003C9 31 FF                           	XOR	EDI,EDI
   303 000003CB E9 FFFFFF4C                     	JMP	L15
   304 000003D0                                 L21:
   305 000003D0 C7 85 FFFFFE3C 00000000         	MOV	DWORD [-452+EBP],0
   306 000003DA E9 FFFFFF35                     	JMP	L14
   307 000003DF                                 L20:
   308 000003DF 68 [00000000]                   	PUSH	_keyfifo
   309 000003E4 E8 [00000000]                   	CALL	_fifo8_get
   310 000003E9 89 C3                           	MOV	EBX,EAX
   311 000003EB E8 [00000000]                   	CALL	_io_sti
   312 000003F0 53                              	PUSH	EBX
   313 000003F1 68 [00000033]                   	PUSH	LC2
   314 000003F6 FF B5 FFFFFE40                  	PUSH	DWORD [-448+EBP]
   315 000003FC E8 [00000000]                   	CALL	_sprintf
   316 00000401 6A 1F                           	PUSH	31
   317 00000403 6A 0F                           	PUSH	15
   318 00000405 6A 10                           	PUSH	16
   319 00000407 6A 00                           	PUSH	0
   320 00000409 6A 0E                           	PUSH	14
   321 0000040B 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   322 00000412 50                              	PUSH	EAX
   323 00000413 FF 35 00000FF8                  	PUSH	DWORD [4088]
   324 00000419 E8 [00000000]                   	CALL	_boxfill8
   325 0000041E 83 C4 2C                        	ADD	ESP,44
   326 00000421 FF B5 FFFFFE40                  	PUSH	DWORD [-448+EBP]
   327 00000427 6A 07                           	PUSH	7
   328 00000429 6A 10                           	PUSH	16
   329 0000042B 6A 00                           	PUSH	0
   330 0000042D 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   331 00000434 50                              	PUSH	EAX
   332 00000435 FF 35 00000FF8                  	PUSH	DWORD [4088]
   333 0000043B E8 [00000000]                   	CALL	_putfonts8_asc
   334 00000440 83 C4 18                        	ADD	ESP,24
   335 00000443 E9 FFFFFD72                     	JMP	L18
   336 00000448                                 L19:
   337 00000448 E8 [00000000]                   	CALL	_io_stihlt
   338 0000044D E9 FFFFFD68                     	JMP	L18
   339 00000452                                 	GLOBAL	_memtest
   340 00000452                                 _memtest:
   341 00000452 55                              	PUSH	EBP
   342 00000453 89 E5                           	MOV	EBP,ESP
   343 00000455 56                              	PUSH	ESI
   344 00000456 53                              	PUSH	EBX
   345 00000457 31 F6                           	XOR	ESI,ESI
   346 00000459 E8 [00000000]                   	CALL	_io_load_eflags
   347 0000045E 0D 00040000                     	OR	EAX,262144
   348 00000463 50                              	PUSH	EAX
   349 00000464 E8 [00000000]                   	CALL	_io_store_eflags
   350 00000469 E8 [00000000]                   	CALL	_io_load_eflags
   351 0000046E 5A                              	POP	EDX
   352 0000046F A9 00040000                     	TEST	EAX,262144
   353 00000474 74 05                           	JE	L24
   354 00000476 BE 00000001                     	MOV	ESI,1
   355 0000047B                                 L24:
   356 0000047B 25 FFFBFFFF                     	AND	EAX,-262145
   357 00000480 50                              	PUSH	EAX
   358 00000481 E8 [00000000]                   	CALL	_io_store_eflags
   359 00000486 89 F0                           	MOV	EAX,ESI
   360 00000488 5B                              	POP	EBX
   361 00000489 84 C0                           	TEST	AL,AL
   362 0000048B 75 31                           	JNE	L27
   363 0000048D                                 L25:
   364 0000048D FF 75 0C                        	PUSH	DWORD [12+EBP]
   365 00000490 FF 75 08                        	PUSH	DWORD [8+EBP]
   366 00000493 E8 [00000000]                   	CALL	_memtest_sub
   367 00000498 89 C3                           	MOV	EBX,EAX
   368 0000049A 58                              	POP	EAX
   369 0000049B 89 F0                           	MOV	EAX,ESI
   370 0000049D 5A                              	POP	EDX
   371 0000049E 84 C0                           	TEST	AL,AL
   372 000004A0 75 09                           	JNE	L28
   373 000004A2                                 L26:
   374 000004A2 8D 65 F8                        	LEA	ESP,DWORD [-8+EBP]
   375 000004A5 89 D8                           	MOV	EAX,EBX
   376 000004A7 5B                              	POP	EBX
   377 000004A8 5E                              	POP	ESI
   378 000004A9 5D                              	POP	EBP
   379 000004AA C3                              	RET
   380 000004AB                                 L28:
   381 000004AB E8 [00000000]                   	CALL	_load_cr0
   382 000004B0 25 9FFFFFFF                     	AND	EAX,-1610612737
   383 000004B5 50                              	PUSH	EAX
   384 000004B6 E8 [00000000]                   	CALL	_store_cr0
   385 000004BB 58                              	POP	EAX
   386 000004BC EB E4                           	JMP	L26
   387 000004BE                                 L27:
   388 000004BE E8 [00000000]                   	CALL	_load_cr0
   389 000004C3 0D 60000000                     	OR	EAX,1610612736
   390 000004C8 50                              	PUSH	EAX
   391 000004C9 E8 [00000000]                   	CALL	_store_cr0
   392 000004CE 59                              	POP	ECX
   393 000004CF EB BC                           	JMP	L25
   394 000004D1                                 	GLOBAL	_memman_init
   395 000004D1                                 _memman_init:
   396 000004D1 55                              	PUSH	EBP
   397 000004D2 89 E5                           	MOV	EBP,ESP
   398 000004D4 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
   399 000004D7 C7 00 00000000                  	MOV	DWORD [EAX],0
   400 000004DD C7 40 04 00000000               	MOV	DWORD [4+EAX],0
   401 000004E4 C7 40 08 00000000               	MOV	DWORD [8+EAX],0
   402 000004EB C7 40 0C 00000000               	MOV	DWORD [12+EAX],0
   403 000004F2 5D                              	POP	EBP
   404 000004F3 C3                              	RET
   405 000004F4                                 	GLOBAL	_memman_total
   406 000004F4                                 _memman_total:
   407 000004F4 55                              	PUSH	EBP
   408 000004F5 31 C0                           	XOR	EAX,EAX
   409 000004F7 89 E5                           	MOV	EBP,ESP
   410 000004F9 31 D2                           	XOR	EDX,EDX
   411 000004FB 53                              	PUSH	EBX
   412 000004FC 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   413 000004FF 8B 0B                           	MOV	ECX,DWORD [EBX]
   414 00000501 39 C8                           	CMP	EAX,ECX
   415 00000503 73 09                           	JAE	L37
   416 00000505                                 L35:
   417 00000505 03 44 D3 14                     	ADD	EAX,DWORD [20+EBX+EDX*8]
   418 00000509 42                              	INC	EDX
   419 0000050A 39 CA                           	CMP	EDX,ECX
   420 0000050C 72 F7                           	JB	L35
   421 0000050E                                 L37:
   422 0000050E 5B                              	POP	EBX
   423 0000050F 5D                              	POP	EBP
   424 00000510 C3                              	RET
   425 00000511                                 	GLOBAL	_memman_alloc
   426 00000511                                 _memman_alloc:
   427 00000511 55                              	PUSH	EBP
   428 00000512 31 C9                           	XOR	ECX,ECX
   429 00000514 89 E5                           	MOV	EBP,ESP
   430 00000516 57                              	PUSH	EDI
   431 00000517 56                              	PUSH	ESI
   432 00000518 53                              	PUSH	EBX
   433 00000519 8B 75 0C                        	MOV	ESI,DWORD [12+EBP]
   434 0000051C 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   435 0000051F 8B 03                           	MOV	EAX,DWORD [EBX]
   436 00000521 39 C1                           	CMP	ECX,EAX
   437 00000523 73 0D                           	JAE	L52
   438 00000525                                 L50:
   439 00000525 8B 54 CB 14                     	MOV	EDX,DWORD [20+EBX+ECX*8]
   440 00000529 39 F2                           	CMP	EDX,ESI
   441 0000052B 73 0C                           	JAE	L54
   442 0000052D 41                              	INC	ECX
   443 0000052E 39 C1                           	CMP	ECX,EAX
   444 00000530 72 F3                           	JB	L50
   445 00000532                                 L52:
   446 00000532 31 C0                           	XOR	EAX,EAX
   447 00000534                                 L38:
   448 00000534 5B                              	POP	EBX
   449 00000535 5E                              	POP	ESI
   450 00000536 5F                              	POP	EDI
   451 00000537 5D                              	POP	EBP
   452 00000538 C3                              	RET
   453 00000539                                 L54:
   454 00000539 8B 7C CB 10                     	MOV	EDI,DWORD [16+EBX+ECX*8]
   455 0000053D 8D 04 3E                        	LEA	EAX,DWORD [ESI+EDI*1]
   456 00000540 89 44 CB 10                     	MOV	DWORD [16+EBX+ECX*8],EAX
   457 00000544 89 D0                           	MOV	EAX,EDX
   458 00000546 29 F0                           	SUB	EAX,ESI
   459 00000548 89 44 CB 14                     	MOV	DWORD [20+EBX+ECX*8],EAX
   460 0000054C 85 C0                           	TEST	EAX,EAX
   461 0000054E 75 20                           	JNE	L44
   462 00000550 8B 03                           	MOV	EAX,DWORD [EBX]
   463 00000552 48                              	DEC	EAX
   464 00000553 89 03                           	MOV	DWORD [EBX],EAX
   465 00000555 39 C1                           	CMP	ECX,EAX
   466 00000557 73 17                           	JAE	L44
   467 00000559 89 C6                           	MOV	ESI,EAX
   468 0000055B                                 L49:
   469 0000055B 8B 44 CB 18                     	MOV	EAX,DWORD [24+EBX+ECX*8]
   470 0000055F 8B 54 CB 1C                     	MOV	EDX,DWORD [28+EBX+ECX*8]
   471 00000563 89 44 CB 10                     	MOV	DWORD [16+EBX+ECX*8],EAX
   472 00000567 89 54 CB 14                     	MOV	DWORD [20+EBX+ECX*8],EDX
   473 0000056B 41                              	INC	ECX
   474 0000056C 39 F1                           	CMP	ECX,ESI
   475 0000056E 72 EB                           	JB	L49
   476 00000570                                 L44:
   477 00000570 89 F8                           	MOV	EAX,EDI
   478 00000572 EB C0                           	JMP	L38
   479 00000574                                 	GLOBAL	_memman_free
   480 00000574                                 _memman_free:
   481 00000574 55                              	PUSH	EBP
   482 00000575 89 E5                           	MOV	EBP,ESP
   483 00000577 57                              	PUSH	EDI
   484 00000578 56                              	PUSH	ESI
   485 00000579 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   486 0000057C 53                              	PUSH	EBX
   487 0000057D 31 DB                           	XOR	EBX,EBX
   488 0000057F 8B 3E                           	MOV	EDI,DWORD [ESI]
   489 00000581 39 FB                           	CMP	EBX,EDI
   490 00000583 7D 0E                           	JGE	L57
   491 00000585                                 L61:
   492 00000585 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   493 00000588 39 44 DE 10                     	CMP	DWORD [16+ESI+EBX*8],EAX
   494 0000058C 77 05                           	JA	L57
   495 0000058E 43                              	INC	EBX
   496 0000058F 39 FB                           	CMP	EBX,EDI
   497 00000591 7C F2                           	JL	L61
   498 00000593                                 L57:
   499 00000593 85 DB                           	TEST	EBX,EBX
   500 00000595 7E 0F                           	JLE	L62
   501 00000597 8B 54 DE 0C                     	MOV	EDX,DWORD [12+ESI+EBX*8]
   502 0000059B 8B 44 DE 08                     	MOV	EAX,DWORD [8+ESI+EBX*8]
   503 0000059F 01 D0                           	ADD	EAX,EDX
   504 000005A1 3B 45 0C                        	CMP	EAX,DWORD [12+EBP]
   505 000005A4 74 73                           	JE	L85
   506 000005A6                                 L62:
   507 000005A6 39 FB                           	CMP	EBX,EDI
   508 000005A8 7D 0C                           	JGE	L71
   509 000005AA 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   510 000005AD 03 45 10                        	ADD	EAX,DWORD [16+EBP]
   511 000005B0 3B 44 DE 10                     	CMP	EAX,DWORD [16+ESI+EBX*8]
   512 000005B4 74 53                           	JE	L86
   513 000005B6                                 L71:
   514 000005B6 81 FF 00000FF9                  	CMP	EDI,4089
   515 000005BC 7F 3D                           	JG	L73
   516 000005BE 89 F9                           	MOV	ECX,EDI
   517 000005C0 39 DF                           	CMP	EDI,EBX
   518 000005C2 7E 15                           	JLE	L83
   519 000005C4                                 L78:
   520 000005C4 8B 44 CE 08                     	MOV	EAX,DWORD [8+ESI+ECX*8]
   521 000005C8 8B 54 CE 0C                     	MOV	EDX,DWORD [12+ESI+ECX*8]
   522 000005CC 89 44 CE 10                     	MOV	DWORD [16+ESI+ECX*8],EAX
   523 000005D0 89 54 CE 14                     	MOV	DWORD [20+ESI+ECX*8],EDX
   524 000005D4 49                              	DEC	ECX
   525 000005D5 39 D9                           	CMP	ECX,EBX
   526 000005D7 7F EB                           	JG	L78
   527 000005D9                                 L83:
   528 000005D9 8D 47 01                        	LEA	EAX,DWORD [1+EDI]
   529 000005DC 89 06                           	MOV	DWORD [ESI],EAX
   530 000005DE 39 46 04                        	CMP	DWORD [4+ESI],EAX
   531 000005E1 7D 03                           	JGE	L79
   532 000005E3 89 46 04                        	MOV	DWORD [4+ESI],EAX
   533 000005E6                                 L79:
   534 000005E6 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   535 000005E9 89 44 DE 10                     	MOV	DWORD [16+ESI+EBX*8],EAX
   536 000005ED 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   537 000005F0 89 44 DE 14                     	MOV	DWORD [20+ESI+EBX*8],EAX
   538 000005F4                                 L84:
   539 000005F4 31 C0                           	XOR	EAX,EAX
   540 000005F6                                 L55:
   541 000005F6 5B                              	POP	EBX
   542 000005F7 5E                              	POP	ESI
   543 000005F8 5F                              	POP	EDI
   544 000005F9 5D                              	POP	EBP
   545 000005FA C3                              	RET
   546 000005FB                                 L73:
   547 000005FB 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   548 000005FE FF 46 0C                        	INC	DWORD [12+ESI]
   549 00000601 01 46 08                        	ADD	DWORD [8+ESI],EAX
   550 00000604 83 C8 FF                        	OR	EAX,-1
   551 00000607 EB ED                           	JMP	L55
   552 00000609                                 L86:
   553 00000609 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   554 0000060C 89 44 DE 10                     	MOV	DWORD [16+ESI+EBX*8],EAX
   555 00000610 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   556 00000613 01 44 DE 14                     	ADD	DWORD [20+ESI+EBX*8],EAX
   557 00000617 EB DB                           	JMP	L84
   558 00000619                                 L85:
   559 00000619 03 55 10                        	ADD	EDX,DWORD [16+EBP]
   560 0000061C 89 54 DE 0C                     	MOV	DWORD [12+ESI+EBX*8],EDX
   561 00000620 3B 1E                           	CMP	EBX,DWORD [ESI]
   562 00000622 7D D0                           	JGE	L84
   563 00000624 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   564 00000627 03 45 10                        	ADD	EAX,DWORD [16+EBP]
   565 0000062A 3B 44 DE 10                     	CMP	EAX,DWORD [16+ESI+EBX*8]
   566 0000062E 75 C4                           	JNE	L84
   567 00000630 03 54 DE 14                     	ADD	EDX,DWORD [20+ESI+EBX*8]
   568 00000634 89 54 DE 0C                     	MOV	DWORD [12+ESI+EBX*8],EDX
   569 00000638 8B 06                           	MOV	EAX,DWORD [ESI]
   570 0000063A 48                              	DEC	EAX
   571 0000063B 89 06                           	MOV	DWORD [ESI],EAX
   572 0000063D 39 C3                           	CMP	EBX,EAX
   573 0000063F 7D B3                           	JGE	L84
   574 00000641 89 C1                           	MOV	ECX,EAX
   575 00000643                                 L70:
   576 00000643 8B 44 DE 18                     	MOV	EAX,DWORD [24+ESI+EBX*8]
   577 00000647 8B 54 DE 1C                     	MOV	EDX,DWORD [28+ESI+EBX*8]
   578 0000064B 89 44 DE 10                     	MOV	DWORD [16+ESI+EBX*8],EAX
   579 0000064F 89 54 DE 14                     	MOV	DWORD [20+ESI+EBX*8],EDX
   580 00000653 43                              	INC	EBX
   581 00000654 39 CB                           	CMP	EBX,ECX
   582 00000656 7C EB                           	JL	L70
   583 00000658 EB 9A                           	JMP	L84
